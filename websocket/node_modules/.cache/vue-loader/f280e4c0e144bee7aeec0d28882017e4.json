{"remainingRequest":"C:\\Users\\justc\\Desktop\\front\\WEB SOCKET\\websocket\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\justc\\Desktop\\front\\WEB SOCKET\\websocket\\src\\views\\MessengerBuilt.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\justc\\Desktop\\front\\WEB SOCKET\\websocket\\src\\views\\MessengerBuilt.vue","mtime":1643664714586},{"path":"C:\\Users\\justc\\Desktop\\front\\WEB SOCKET\\websocket\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\justc\\Desktop\\front\\WEB SOCKET\\websocket\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\justc\\Desktop\\front\\WEB SOCKET\\websocket\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\justc\\Desktop\\front\\WEB SOCKET\\websocket\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmltcG9ydCBNZXNzZW5nZXIgZnJvbSAiLi4vY29tcG9uZW50cy9tZXNzZW5nZXJEaXNwbGF5L01lc3NlbmdlciI7DQppbXBvcnQgTWVzc2VuZ2VyQ29udGFjdHNCYXIgZnJvbSAiLi4vY29tcG9uZW50cy9tZXNzZW5nZXJDb250YWN0c0Jhci9NZXNzZW5nZXJDb250YWN0c0JhciI7DQppbXBvcnQgTWVzc2VuZ2VyU2VhcmNoQmFyIGZyb20gIi4uL2NvbXBvbmVudHMvbWVzc2VuZ2VyU2VhcmNoQmFyL01lc3NlbmdlclNlYXJjaEJhciI7DQppbXBvcnQge21hcEFjdGlvbnMsIG1hcEdldHRlcnN9IGZyb20gInZ1ZXgiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJNZXNzZW5nZXJCdWlsdCIsDQogIGNvbXBvbmVudHM6IHtNZXNzZW5nZXJTZWFyY2hCYXIsIE1lc3NlbmdlckNvbnRhY3RzQmFyLCBNZXNzZW5nZXJ9LA0KICBkYXRhOiAoKSA9PiAoew0KICAgIGFjdGl2ZTogew0KICAgICAgc2VhcmNoQmFyOiBmYWxzZSwNCiAgICAgIGNvbnRhY3RzQmFyOiB0cnVlLA0KICAgICAgYnVyZ2VyU3RhdHVzOiBmYWxzZQ0KICAgIH0sDQogICAgbWVzc2FnZTogJycsDQogIH0pLA0KICBjb21wdXRlZDogew0KICAgIC4uLm1hcEdldHRlcnMoWw0KICAgICAgInR5cGluZ1N0YXR1cyIsDQogICAgICAiY29udGFjdFVzZXJzU2VhcmNoZWRMaXN0IiwNCiAgICAgICJ3c0Nvbm5lY3Rpb25TdGF0dXMiLA0KICAgICAgInVzZXJJZCIsDQogICAgICAiY29udGFjdFVzZXJzTGlzdCIsDQogICAgICAiY29udGFjdFVzZXJTZW5kaW5nVG8iLA0KICAgICAgInNvcnRlZE1lc3NhZ2VzIiwNCiAgICAgICJzZWFyY2hlZE1lc3NhZ2VzIg0KICAgIF0pLA0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLi4ubWFwQWN0aW9ucyhbDQogICAgICAiZW5kVHlwaW5nIiwNCiAgICAgICJzdGFydFR5cGluZyIsDQogICAgICAic2VhcmNoQ29udGFjdFVzZXJzIiwNCiAgICAgICJzZXRXc1VzZXJGcm9tU3RvcmFnZSIsDQogICAgICAic2VuZE1lc3NhZ2UiLA0KICAgICAgImNvbm5lY3QiLA0KICAgICAgImNob29zZUNvbnRhY3RUb1NlbmQiLA0KICAgICAgInNldFVzZXJGcm9tTG9jYWxTdG9yYWdlIiwNCiAgICAgICJzZWFyY2hBdENvbnRhY3RVc2VyTWVzc2FnZXMiDQogICAgXSksDQogICAgb25CdXJnZXJCdXR0b24oKSB7DQogICAgICB0aGlzLmFjdGl2ZS5jb250YWN0c0JhciA9IHRydWUNCiAgICAgIHRoaXMuYWN0aXZlLmJ1cmdlclN0YXR1cyA9IGZhbHNlDQogICAgfSwNCiAgICBvbkFycm93TGVmdENsaWNrKCkgew0KICAgICAgdGhpcy5hY3RpdmUuY29udGFjdHNCYXIgPSBmYWxzZQ0KICAgICAgdGhpcy5hY3RpdmUuYnVyZ2VyU3RhdHVzID0gdHJ1ZQ0KICAgIH0sDQogICAgb25NZXNzYWdlc1NlYXJjaElucHV0KHN0cmluZykgew0KICAgICAgdGhpcy5zZWFyY2hBdENvbnRhY3RVc2VyTWVzc2FnZXMoc3RyaW5nKQ0KICAgIH0sDQogICAgb2JqZWN0Tm90RW1wdHkob2JqKSB7DQogICAgICByZXR1cm4gISFPYmplY3Qua2V5cyhvYmopLmxlbmd0aA0KICAgIH0sDQogICAgb25TZWFyY2hJbnB1dCh2YWx1ZSkgew0KICAgICAgdGhpcy5zZWFyY2hDb250YWN0VXNlcnMoe3N0cmluZzogdmFsdWUsIHVzZXJJZDogdGhpcy51c2VySWR9KQ0KICAgIH0sDQogICAgb25Db250YWN0c0Jhckl0ZW1DbGljayhjb250YWN0c1VzZXIpIHsNCiAgICAgIHRoaXMuY2hvb3NlQ29udGFjdFRvU2VuZChjb250YWN0c1VzZXIpDQogICAgfSwNCiAgICBvblNlYXJjaENsaWNrKCkgew0KICAgICAgdGhpcy5hY3RpdmUuc2VhcmNoQmFyID0gdHJ1ZQ0KICAgIH0sDQogICAgb25BcnJvd1JpZ2h0Q2xpY2soKSB7DQogICAgICB0aGlzLmFjdGl2ZS5zZWFyY2hCYXIgPSBmYWxzZQ0KICAgIH0sDQogICAgb25TZW5kQ2xpY2soKSB7DQogICAgICBpZiAodGhpcy5tZXNzYWdlLmxlbmd0aCA+PSAxKSB7DQogICAgICAgIHRoaXMuc2VuZE1lc3NhZ2Uoew0KICAgICAgICAgIHVzZXJJZDogdGhpcy51c2VySWQsDQogICAgICAgICAgbWVzc2FnZTogdGhpcy5tZXNzYWdlLA0KICAgICAgICAgIHRvVXNlcjogdGhpcy5jb250YWN0VXNlclNlbmRpbmdUby51c2VySWQNCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICAgIHRoaXMubWVzc2FnZSA9ICcnDQogICAgfSwNCiAgICBvbk1lc3NlbmdlcklucHV0KHZhbHVlKSB7DQogICAgICB0aGlzLm1lc3NhZ2UgPSB2YWx1ZQ0KICAgICAgaWYgKHRoaXMubWVzc2FnZS5sZW5ndGgpIHsNCiAgICAgICAgdGhpcy5zdGFydFR5cGluZyh7dXNlcklkOiB0aGlzLnVzZXJJZCwgdG9Vc2VyOiB0aGlzLmNvbnRhY3RVc2VyU2VuZGluZ1RvLnVzZXJJZH0pDQogICAgICAgIGNvbnNvbGUubG9nKHRoaXMudHlwaW5nU3RhdHVzKQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5lbmRUeXBpbmcoe3VzZXJJZDogdGhpcy51c2VySWQsIHRvVXNlcjogdGhpcy5jb250YWN0VXNlclNlbmRpbmdUby51c2VySWR9KQ0KICAgICAgfQ0KICAgIH0sDQogICAgYXN5bmMgdXNlckF1dGhJcygpIHsNCiAgICAgIHRoaXMuY29ubmVjdCgpDQogICAgICBjb25zdCB1c2VyU3RvcmFnZSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXIiKSkNCiAgICAgIGlmICh1c2VyU3RvcmFnZSkgew0KICAgICAgICB0aGlzLnNldFVzZXJGcm9tTG9jYWxTdG9yYWdlKHVzZXJTdG9yYWdlKQ0KICAgICAgICB0aGlzLnNldFdzVXNlckZyb21TdG9yYWdlKHVzZXJTdG9yYWdlKQ0KICAgICAgICBhd2FpdCB0aGlzLnNlYXJjaENvbnRhY3RVc2Vycyh7c3RyaW5nOiBudWxsLCB1c2VySWQ6IHRoaXMudXNlcklkfSkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGNvbnNvbGUubG9nKCdub3QgYXV0aCcpDQogICAgICB9DQogICAgfQ0KICB9LA0KICBhc3luYyBjcmVhdGVkKCkgew0KICAgIGF3YWl0IHRoaXMudXNlckF1dGhJcygpDQogIH0NCn0NCg=="},{"version":3,"sources":["MessengerBuilt.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MessengerBuilt.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"messenger-built\">\r\n    <!--    loading -->\r\n    <div class=\"messenger-built__inner\">\r\n      <MessengerContactsBar\r\n          @contactsBarItemClick=\"onContactsBarItemClick\"\r\n          @searchInput=\"onSearchInput\"\r\n          @arrowLeftClick=\"onArrowLeftClick\"\r\n          v-if=\"active.contactsBar\"\r\n          class=\"layout__contacts-bar\"\r\n          :contactUsersList=\"contactUsersSearchedList\"\r\n      />\r\n      <Messenger\r\n          v-if=\"objectNotEmpty(contactUserSendingTo)\"\r\n          :contactUserSendingTo=\"contactUserSendingTo\"\r\n          :messages=\"sortedMessages\"\r\n          :inputMessage=\"message\"\r\n          :burgerStatus=\"active.burgerStatus\"\r\n          @burgerButton=\"onBurgerButton\"\r\n          @messengerInput=\"onMessengerInput\"\r\n          @sendClick=\"onSendClick\"\r\n          @searchClick=\"onSearchClick\"\r\n          class=\"layout__messenger\"\r\n      />\r\n      <MessengerSearchBar\r\n          @arrowRightClick=\"onArrowRightClick\"\r\n          :messagesList=\"searchedMessages\"\r\n          @messagesSearchInput=\"onMessagesSearchInput\"\r\n          v-if=\"active.searchBar\"\r\n          class=\"layout__search-bar\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport Messenger from \"../components/messengerDisplay/Messenger\";\r\nimport MessengerContactsBar from \"../components/messengerContactsBar/MessengerContactsBar\";\r\nimport MessengerSearchBar from \"../components/messengerSearchBar/MessengerSearchBar\";\r\nimport {mapActions, mapGetters} from \"vuex\";\r\n\r\nexport default {\r\n  name: \"MessengerBuilt\",\r\n  components: {MessengerSearchBar, MessengerContactsBar, Messenger},\r\n  data: () => ({\r\n    active: {\r\n      searchBar: false,\r\n      contactsBar: true,\r\n      burgerStatus: false\r\n    },\r\n    message: '',\r\n  }),\r\n  computed: {\r\n    ...mapGetters([\r\n      \"typingStatus\",\r\n      \"contactUsersSearchedList\",\r\n      \"wsConnectionStatus\",\r\n      \"userId\",\r\n      \"contactUsersList\",\r\n      \"contactUserSendingTo\",\r\n      \"sortedMessages\",\r\n      \"searchedMessages\"\r\n    ]),\r\n  },\r\n  methods: {\r\n    ...mapActions([\r\n      \"endTyping\",\r\n      \"startTyping\",\r\n      \"searchContactUsers\",\r\n      \"setWsUserFromStorage\",\r\n      \"sendMessage\",\r\n      \"connect\",\r\n      \"chooseContactToSend\",\r\n      \"setUserFromLocalStorage\",\r\n      \"searchAtContactUserMessages\"\r\n    ]),\r\n    onBurgerButton() {\r\n      this.active.contactsBar = true\r\n      this.active.burgerStatus = false\r\n    },\r\n    onArrowLeftClick() {\r\n      this.active.contactsBar = false\r\n      this.active.burgerStatus = true\r\n    },\r\n    onMessagesSearchInput(string) {\r\n      this.searchAtContactUserMessages(string)\r\n    },\r\n    objectNotEmpty(obj) {\r\n      return !!Object.keys(obj).length\r\n    },\r\n    onSearchInput(value) {\r\n      this.searchContactUsers({string: value, userId: this.userId})\r\n    },\r\n    onContactsBarItemClick(contactsUser) {\r\n      this.chooseContactToSend(contactsUser)\r\n    },\r\n    onSearchClick() {\r\n      this.active.searchBar = true\r\n    },\r\n    onArrowRightClick() {\r\n      this.active.searchBar = false\r\n    },\r\n    onSendClick() {\r\n      if (this.message.length >= 1) {\r\n        this.sendMessage({\r\n          userId: this.userId,\r\n          message: this.message,\r\n          toUser: this.contactUserSendingTo.userId\r\n        })\r\n      }\r\n      this.message = ''\r\n    },\r\n    onMessengerInput(value) {\r\n      this.message = value\r\n      if (this.message.length) {\r\n        this.startTyping({userId: this.userId, toUser: this.contactUserSendingTo.userId})\r\n        console.log(this.typingStatus)\r\n      } else {\r\n        this.endTyping({userId: this.userId, toUser: this.contactUserSendingTo.userId})\r\n      }\r\n    },\r\n    async userAuthIs() {\r\n      this.connect()\r\n      const userStorage = JSON.parse(localStorage.getItem(\"user\"))\r\n      if (userStorage) {\r\n        this.setUserFromLocalStorage(userStorage)\r\n        this.setWsUserFromStorage(userStorage)\r\n        await this.searchContactUsers({string: null, userId: this.userId})\r\n      } else {\r\n        console.log('not auth')\r\n      }\r\n    }\r\n  },\r\n  async created() {\r\n    await this.userAuthIs()\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.messenger-built {\r\n  overflow: hidden;\r\n\r\n  &__inner {\r\n    display: grid;\r\n    grid-template-columns: auto;\r\n    grid-auto-flow: column;\r\n    height: 100vh;\r\n    grid-gap: 1px;\r\n    @media (max-width: 600px) {\r\n      grid-template-columns: auto;\r\n    }\r\n\r\n    .login-form {\r\n    }\r\n\r\n  }\r\n\r\n  &__contacts-bar {\r\n    @media (max-width: 600px) {\r\n      display: none;\r\n    }\r\n  }\r\n\r\n  &__messenger {\r\n\r\n  }\r\n\r\n  &__search-bar {\r\n  }\r\n}\r\n</style>\r\n"]}]}