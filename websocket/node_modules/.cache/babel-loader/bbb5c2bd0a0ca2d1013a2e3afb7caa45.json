{"remainingRequest":"C:\\Users\\justc\\Desktop\\front\\WEB SOCKET\\websocket\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\justc\\Desktop\\front\\WEB SOCKET\\websocket\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\Users\\justc\\Desktop\\front\\WEB SOCKET\\websocket\\src\\store\\modules\\websocket.js","dependencies":[{"path":"C:\\Users\\justc\\Desktop\\front\\WEB SOCKET\\websocket\\src\\store\\modules\\websocket.js","mtime":1643659435893},{"path":"C:\\Users\\justc\\Desktop\\front\\WEB SOCKET\\websocket\\babel.config.js","mtime":1639924488076},{"path":"C:\\Users\\justc\\Desktop\\front\\WEB SOCKET\\websocket\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\justc\\Desktop\\front\\WEB SOCKET\\websocket\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\justc\\Desktop\\front\\WEB SOCKET\\websocket\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJDOlxcVXNlcnNcXGp1c3RjXFxEZXNrdG9wXFxmcm9udFxcV0VCIFNPQ0tFVFxcd2Vic29ja2V0XFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFx0b0NvbnN1bWFibGVBcnJheS5qcyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiQzpcXFVzZXJzXFxqdXN0Y1xcRGVza3RvcFxcZnJvbnRcXFdFQiBTT0NLRVRcXHdlYnNvY2tldFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcZGVmaW5lUHJvcGVydHkuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzpcXFVzZXJzXFxqdXN0Y1xcRGVza3RvcFxcZnJvbnRcXFdFQiBTT0NLRVRcXHdlYnNvY2tldFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcYXN5bmNUb0dlbmVyYXRvci5qcyI7Cgp2YXIgX211dGF0aW9uczsKCmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvcnQuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCB7IGFwaSB9IGZyb20gIi4uLy4uLy4uLy4uL3dlYnNvY2tldF9zZXJ2ZXIvY2xpZW50IjsKaW1wb3J0IHsgZGF0YWJhc2UgfSBmcm9tICIuLi8uLi8uLi8uLi93ZWJzb2NrZXRfc2VydmVyL2RhdGFiYXNlL2FwaSI7CmltcG9ydCB7IGNvbnRhY3RVc2VyQ2hhdCB9IGZyb20gIi4uL21vZHVsZXMvZnVuY3Rpb25zL3dzRnVuY3Rpb25zIjsKaW1wb3J0IHsgc2VhcmNoTWVzc2FnZUluTWVzc2FnZXMgfSBmcm9tICIuLi9tb2R1bGVzL2Z1bmN0aW9ucy91c2VyRnVuY3Rpb25zIjsKdmFyIE1VVEFUSU9OX1RZUEUgPSB7CiAgQUREX01FU1NBR0U6ICJBRERfTUVTU0FHRSIsCiAgVVBEQVRFX01FU1NBR0VTOiAiVVBEQVRFX01FU1NBR0VTIiwKICBNRVNTQUdFUzogIk1FU1NBR0VTIiwKICBDT05ORUNUSU9OOiAiQ09OTkVDVElPTiIsCiAgVVNFUl9TRU5ESU5HX1RPOiAiVVNFUl9TRU5ESU5HX1RPIiwKICBVU0VSOiAiVVNFUiIsCiAgVVNFUl9UWVBJTkdfU1RBVFVTOiAiVVNFUl9UWVBJTkdfU1RBVFVTIiwKICBTRUFSQ0hFRF9NRVNTQUdFUzogIlNFQVJDSEVEX01FU1NBR0VTIgp9OwpleHBvcnQgdmFyIHdlYnNvY2tldCA9IHsKICBhY3Rpb25zOiB7CiAgICBjb25uZWN0OiBmdW5jdGlvbiBjb25uZWN0KF9yZWYpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICB2YXIgd3MgPSBuZXcgV2ViU29ja2V0KCJ3czovL2xvY2FsaG9zdDo0MDAwIik7CiAgICAgIHdzLmFkZEV2ZW50TGlzdGVuZXIoIm9wZW4iLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBtZXNzYWdlczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygib3BlbiIpOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YWJhc2UuZ2V0QWxsTWVzc2FnZXMoKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgbWVzc2FnZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgY29tbWl0KE1VVEFUSU9OX1RZUEUuTUVTU0FHRVMsIG1lc3NhZ2VzKTsKICAgICAgICAgICAgICAgIGNvbW1pdChNVVRBVElPTl9UWVBFLkNPTk5FQ1RJT04sIHdzLCB0cnVlKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSk7CiAgICAgIHdzLmFkZEV2ZW50TGlzdGVuZXIoImNsb3NlIiwgZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnNvbGUubG9nKCdjbG9zZScpOwogICAgICAgIGNvbW1pdChNVVRBVElPTl9UWVBFLkNPTk5FQ1RJT04sIGZhbHNlKTsKICAgICAgfSk7CiAgICAgIHdzLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLCBmdW5jdGlvbiAoX3JlZjMpIHsKICAgICAgICB2YXIgZGF0YSA9IF9yZWYzLmRhdGE7CiAgICAgICAgY29uc29sZS5sb2coJ21lc3NhZ2UnKTsKCiAgICAgICAgdmFyIF9KU09OJHBhcnNlID0gSlNPTi5wYXJzZShkYXRhKSwKICAgICAgICAgICAgdG9waWMgPSBfSlNPTiRwYXJzZS50b3BpYzsKCiAgICAgICAgaWYgKHRvcGljID09PSAibWVzc2FnZXMiKSB7CiAgICAgICAgICB2YXIgX0pTT04kcGFyc2UyID0gSlNPTi5wYXJzZShkYXRhKSwKICAgICAgICAgICAgICBwYXlsb2FkID0gX0pTT04kcGFyc2UyLnBheWxvYWQ7CgogICAgICAgICAgY29tbWl0KE1VVEFUSU9OX1RZUEUuTUVTU0FHRVMsIHBheWxvYWQpOwogICAgICAgIH0gZWxzZSBpZiAodG9waWMgPT09ICJ1c2VyU3RhcnRUeXBpbmciIHx8IHRvcGljID09PSAidXNlckVuZFR5cGluZyIpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKHRvcGljKTsKICAgICAgICAgIHZhciBzdGF0dXMgPSB7CiAgICAgICAgICAgICJ1c2VyU3RhcnRUeXBpbmciOiB0cnVlLAogICAgICAgICAgICAidXNlckVuZFR5cGluZyI6IGZhbHNlCiAgICAgICAgICB9OwogICAgICAgICAgY29tbWl0KE1VVEFUSU9OX1RZUEUuVVNFUl9UWVBJTkdfU1RBVFVTLCBzdGF0dXNbdG9waWNdKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHNlbmRNZXNzYWdlOiBmdW5jdGlvbiBzZW5kTWVzc2FnZShfcmVmNCwgX3JlZjUpIHsKICAgICAgdmFyIHN0YXRlID0gX3JlZjQuc3RhdGU7CiAgICAgIHZhciB1c2VySWQgPSBfcmVmNS51c2VySWQsCiAgICAgICAgICBtZXNzYWdlID0gX3JlZjUubWVzc2FnZSwKICAgICAgICAgIHRvVXNlciA9IF9yZWY1LnRvVXNlcjsKICAgICAgc3RhdGUud2Vic29ja2V0LnNlbmQoYXBpLmFkZE1lc3NhZ2UodXNlcklkLCBtZXNzYWdlLCB0b1VzZXIpKTsKICAgIH0sCiAgICBzdGFydFR5cGluZzogZnVuY3Rpb24gc3RhcnRUeXBpbmcoX3JlZjYsIF9yZWY3KSB7CiAgICAgIHZhciBzdGF0ZSA9IF9yZWY2LnN0YXRlOwogICAgICB2YXIgdXNlcklkID0gX3JlZjcudXNlcklkLAogICAgICAgICAgdG9Vc2VyID0gX3JlZjcudG9Vc2VyOwogICAgICBzdGF0ZS53ZWJzb2NrZXQuc2VuZChhcGkudXNlclN0YXJ0VHlwaW5nKHVzZXJJZCwgdG9Vc2VyKSk7CiAgICB9LAogICAgZW5kVHlwaW5nOiBmdW5jdGlvbiBlbmRUeXBpbmcoX3JlZjgsIF9yZWY5KSB7CiAgICAgIHZhciBzdGF0ZSA9IF9yZWY4LnN0YXRlOwogICAgICB2YXIgdXNlcklkID0gX3JlZjkudXNlcklkLAogICAgICAgICAgdG9Vc2VyID0gX3JlZjkudG9Vc2VyOwogICAgICBzdGF0ZS53ZWJzb2NrZXQuc2VuZChhcGkudXNlckVuZFR5cGluZyh1c2VySWQsIHRvVXNlcikpOwogICAgfSwKICAgIGNob29zZUNvbnRhY3RUb1NlbmQ6IGZ1bmN0aW9uIGNob29zZUNvbnRhY3RUb1NlbmQoX3JlZjEwLCB1c2VyKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMTAuY29tbWl0OwogICAgICBjb21taXQoTVVUQVRJT05fVFlQRS5VU0VSX1NFTkRJTkdfVE8sIHVzZXIpOwogICAgfSwKICAgIHNldFdzVXNlckZyb21TdG9yYWdlOiBmdW5jdGlvbiBzZXRXc1VzZXJGcm9tU3RvcmFnZShfcmVmMTEsIHVzZXIpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYxMS5jb21taXQ7CiAgICAgIGNvbW1pdChNVVRBVElPTl9UWVBFLlVTRVIsIHVzZXIpOwogICAgfSwKICAgIHNlYXJjaEF0Q29udGFjdFVzZXJNZXNzYWdlczogZnVuY3Rpb24gc2VhcmNoQXRDb250YWN0VXNlck1lc3NhZ2VzKF9yZWYxMiwgbWVzc2FnZSkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjEyLmNvbW1pdCwKICAgICAgICAgIHN0YXRlID0gX3JlZjEyLnN0YXRlOwogICAgICB2YXIgc2VhcmNoZWRNZXNzYWdlcyA9IHNlYXJjaE1lc3NhZ2VJbk1lc3NhZ2VzKHN0YXRlLm1lc3NhZ2VzLCBtZXNzYWdlKTsKICAgICAgY29tbWl0KE1VVEFUSU9OX1RZUEUuU0VBUkNIRURfTUVTU0FHRVMsIHNlYXJjaGVkTWVzc2FnZXMpOwogICAgfQogIH0sCiAgbXV0YXRpb25zOiAoX211dGF0aW9ucyA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX211dGF0aW9ucywgTVVUQVRJT05fVFlQRS5TRUFSQ0hFRF9NRVNTQUdFUywgZnVuY3Rpb24gKHN0YXRlLCBzZWFyY2hlZE1lc3NhZ2VzKSB7CiAgICBzdGF0ZS5zZWFyY2hlZE1lc3NhZ2VzID0gc2VhcmNoZWRNZXNzYWdlczsKICB9KSwgX2RlZmluZVByb3BlcnR5KF9tdXRhdGlvbnMsIE1VVEFUSU9OX1RZUEUuVVNFUl9UWVBJTkdfU1RBVFVTLCBmdW5jdGlvbiAoc3RhdGUsIHN0YXR1cykgewogICAgc3RhdGUudHlwaW5nU3RhdHVzID0gc3RhdHVzOwogIH0pLCBfZGVmaW5lUHJvcGVydHkoX211dGF0aW9ucywgTVVUQVRJT05fVFlQRS5VU0VSLCBmdW5jdGlvbiAoc3RhdGUsIHVzZXIpIHsKICAgIHN0YXRlLndzVXNlciA9IHVzZXI7CiAgfSksIF9kZWZpbmVQcm9wZXJ0eShfbXV0YXRpb25zLCBNVVRBVElPTl9UWVBFLlVTRVJfU0VORElOR19UTywgZnVuY3Rpb24gKHN0YXRlLCB1c2VyKSB7CiAgICBzdGF0ZS5jb250YWN0VXNlclNlbmRpbmdUbyA9IHVzZXI7CiAgfSksIF9kZWZpbmVQcm9wZXJ0eShfbXV0YXRpb25zLCBNVVRBVElPTl9UWVBFLk1FU1NBR0VTLCBmdW5jdGlvbiAoc3RhdGUsIHBheWxvYWQpIHsKICAgIHN0YXRlLm1lc3NhZ2VzID0gcGF5bG9hZDsKICB9KSwgX2RlZmluZVByb3BlcnR5KF9tdXRhdGlvbnMsIE1VVEFUSU9OX1RZUEUuQ09OTkVDVElPTiwgZnVuY3Rpb24gKHN0YXRlLCB3cywgc3RhdHVzKSB7CiAgICBzdGF0ZS53c0lzQ29ubmVjdGVkID0gc3RhdHVzOwogICAgc3RhdGUud2Vic29ja2V0ID0gd3M7CiAgfSksIF9tdXRhdGlvbnMpLAogIHN0YXRlOiB7CiAgICB0eXBpbmdTdGF0dXM6IGZhbHNlLAogICAgd3NVc2VyOiB7fSwKICAgIGNvbnRhY3RVc2VyU2VuZGluZ1RvOiB7fSwKICAgIG1lc3NhZ2VzOiBbXSwKICAgIHdzSXNDb25uZWN0ZWQ6IGZhbHNlLAogICAgd2Vic29ja2V0OiBudWxsLAogICAgc2VhcmNoZWRNZXNzYWdlczogW10KICB9LAogIC8v0YLRgNC10LHQsCDQt9Cw0L/RgNC+0YEg0L3QsCDQutC+0L3QutGA0LXRgtC90L7Qs9C+INGO0LfQtdGAINGA0L7QsdC40YLQuCDQv9C+INC40LQg0Lcg0Y/QutC40Lwg0Y8g0L/QtdGA0LXQv9C40YHRg9GO0YHRjCDRliDQv9C+INC50L7Qs9C+INC/0L7QstGW0LTQvtC80LvQtdC90L3Rj9C8INGB0L7RgNGC0ZbRgNGD0LLQsNGC0Lgg0Y/QutGWINC80LXQvdGWCiAgZ2V0dGVyczogewogICAgd3NDb25uZWN0aW9uU3RhdHVzOiBmdW5jdGlvbiB3c0Nvbm5lY3Rpb25TdGF0dXMoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLndzSXNDb25uZWN0ZWQ7CiAgICB9LAogICAgc29ydGVkTWVzc2FnZXM6IGZ1bmN0aW9uIHNvcnRlZE1lc3NhZ2VzKHN0YXRlKSB7CiAgICAgIHZhciBjb3B5ID0gX3RvQ29uc3VtYWJsZUFycmF5KHN0YXRlLm1lc3NhZ2VzKTsKCiAgICAgIGNvcHkuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgIHJldHVybiBhLmNyZWF0ZWRBdCA9IGIuY3JlYXRlZEF0OwogICAgICB9KTsKICAgICAgcmV0dXJuIGNvbnRhY3RVc2VyQ2hhdChzdGF0ZS5jb250YWN0VXNlclNlbmRpbmdUbywgY29weSwgc3RhdGUud3NVc2VyKTsKICAgIH0sCiAgICBjb250YWN0VXNlclNlbmRpbmdUbzogZnVuY3Rpb24gY29udGFjdFVzZXJTZW5kaW5nVG8oc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmNvbnRhY3RVc2VyU2VuZGluZ1RvOwogICAgfSwKICAgIHR5cGluZ1N0YXR1czogZnVuY3Rpb24gdHlwaW5nU3RhdHVzKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS50eXBpbmdTdGF0dXM7CiAgICB9LAogICAgc2VhcmNoZWRNZXNzYWdlczogZnVuY3Rpb24gc2VhcmNoZWRNZXNzYWdlcyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuc2VhcmNoZWRNZXNzYWdlczsKICAgIH0KICB9Cn07"},{"version":3,"sources":["C:/Users/justc/Desktop/front/WEB SOCKET/websocket/src/store/modules/websocket.js"],"names":["api","database","contactUserChat","searchMessageInMessages","MUTATION_TYPE","ADD_MESSAGE","UPDATE_MESSAGES","MESSAGES","CONNECTION","USER_SENDING_TO","USER","USER_TYPING_STATUS","SEARCHED_MESSAGES","websocket","actions","connect","commit","ws","WebSocket","addEventListener","console","log","getAllMessages","messages","data","JSON","parse","topic","payload","status","sendMessage","state","userId","message","toUser","send","addMessage","startTyping","userStartTyping","endTyping","userEndTyping","chooseContactToSend","user","setWsUserFromStorage","searchAtContactUserMessages","searchedMessages","mutations","typingStatus","wsUser","contactUserSendingTo","wsIsConnected","getters","wsConnectionStatus","sortedMessages","copy","sort","a","b","createdAt"],"mappings":"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","sourcesContent":["import {api} from \"../../../../websocket_server/client\";\r\nimport {database} from \"../../../../websocket_server/database/api\";\r\nimport {contactUserChat} from \"../modules/functions/wsFunctions\"\r\nimport {searchMessageInMessages} from \"../modules/functions/userFunctions\"\r\n\r\nconst MUTATION_TYPE = {\r\n    ADD_MESSAGE: \"ADD_MESSAGE\",\r\n    UPDATE_MESSAGES: \"UPDATE_MESSAGES\",\r\n    MESSAGES: \"MESSAGES\",\r\n    CONNECTION: \"CONNECTION\",\r\n    USER_SENDING_TO: \"USER_SENDING_TO\",\r\n    USER: \"USER\",\r\n    USER_TYPING_STATUS: \"USER_TYPING_STATUS\",\r\n    SEARCHED_MESSAGES: \"SEARCHED_MESSAGES\"\r\n}\r\n\r\nexport const websocket = {\r\n    actions: {\r\n        connect({commit}) {\r\n            const ws = new WebSocket(\"ws://localhost:4000\");\r\n            ws.addEventListener(\"open\", async () => {\r\n                console.log(\"open\")\r\n                const messages = await database.getAllMessages()\r\n                commit(MUTATION_TYPE.MESSAGES, messages)\r\n                commit(MUTATION_TYPE.CONNECTION, ws, true)\r\n            })\r\n            ws.addEventListener(\"close\", () => {\r\n                console.log('close')\r\n                commit(MUTATION_TYPE.CONNECTION, false)\r\n            })\r\n            ws.addEventListener(\"message\", ({data}) => {\r\n                console.log('message')\r\n                const {topic} = JSON.parse(data)\r\n                if (topic === \"messages\") {\r\n                    const {payload} = JSON.parse(data)\r\n                    commit(MUTATION_TYPE.MESSAGES, payload)\r\n                } else if (topic === \"userStartTyping\" || topic === \"userEndTyping\") {\r\n                    console.log(topic)\r\n                    const status = {\r\n                        \"userStartTyping\": true,\r\n                        \"userEndTyping\": false\r\n                    }\r\n                    commit(MUTATION_TYPE.USER_TYPING_STATUS, status[topic])\r\n                }\r\n            })\r\n        },\r\n        sendMessage({state}, {userId, message, toUser}) {\r\n            state.websocket.send(api.addMessage(userId, message, toUser))\r\n        },\r\n        startTyping({state}, {userId, toUser}) {\r\n            state.websocket.send(api.userStartTyping(userId, toUser))\r\n        },\r\n        endTyping({state}, {userId, toUser}) {\r\n            state.websocket.send(api.userEndTyping(userId, toUser))\r\n        },\r\n        chooseContactToSend({commit}, user) {\r\n            commit(MUTATION_TYPE.USER_SENDING_TO, user)\r\n        },\r\n        setWsUserFromStorage({commit}, user) {\r\n            commit(MUTATION_TYPE.USER, user)\r\n        },\r\n        searchAtContactUserMessages({commit, state}, message) {\r\n            const searchedMessages = searchMessageInMessages(state.messages, message);\r\n            commit(MUTATION_TYPE.SEARCHED_MESSAGES, searchedMessages)\r\n        },\r\n    },\r\n    mutations: {\r\n        [MUTATION_TYPE.SEARCHED_MESSAGES](state, searchedMessages) {\r\n            state.searchedMessages = searchedMessages;\r\n        },\r\n        [MUTATION_TYPE.USER_TYPING_STATUS](state, status) {\r\n            state.typingStatus = status\r\n        },\r\n        [MUTATION_TYPE.USER](state, user) {\r\n            state.wsUser = user\r\n        },\r\n        [MUTATION_TYPE.USER_SENDING_TO](state, user) {\r\n            state.contactUserSendingTo = user\r\n        },\r\n\r\n        [MUTATION_TYPE.MESSAGES](state, payload) {\r\n            state.messages = payload\r\n        },\r\n        [MUTATION_TYPE.CONNECTION](state, ws, status) {\r\n            state.wsIsConnected = status\r\n            state.websocket = ws\r\n        },\r\n    },\r\n    state: {\r\n        typingStatus: false,\r\n        wsUser: {},\r\n        contactUserSendingTo: {},\r\n        messages: [],\r\n        wsIsConnected: false,\r\n        websocket: null,\r\n        searchedMessages: [],\r\n    },\r\n    //треба запрос на конкретного юзер робити по ид з яким я переписуюсь і по його повідомленням сортірувати які мені\r\n    getters: {\r\n        wsConnectionStatus: state => state.wsIsConnected,\r\n        sortedMessages: state => {\r\n            const copy = [...state.messages];\r\n            copy.sort((a, b) => a.createdAt = b.createdAt)\r\n            return contactUserChat(state.contactUserSendingTo, copy, state.wsUser)\r\n        },\r\n        contactUserSendingTo: state => state.contactUserSendingTo,\r\n        typingStatus: state => state.typingStatus,\r\n        searchedMessages: state => state.searchedMessages\r\n    },\r\n}"]}]}